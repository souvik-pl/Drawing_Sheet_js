(()=>{"use strict";const t={penButtonId:"penButton",eraserButtonId:"eraserButton",eraseAllButtonId:"eraseAllButton",canvasContainerId:"canvasContainer",sizeSliderId:"sizeSlider",sizeSliderLabelId:"sizeSliderLabel",penColorPickerId:"penColorPicker",downloadButtonId:"downloadButton",cssClasses:{buttonSelected:"button_selected",cursorPen:"cursor_pen",cursorEraser:"cursor_eraser"},uiTexts:{sliderLabel:{pen:"Pen Size",eraser:"Eraser Size"}}},e={canvasId:"canvas",toolType:{pen:"pen",eraser:"eraser"}},{toolType:s}=e;class n{constructor(t){this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.isDrawingStarted=!1,this.init(),this.setupEventListeners()}init(){this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight}setupEventListeners(){this.canvas.addEventListener("mousedown",this.drawInit.bind(this)),this.canvas.addEventListener("mousemove",this.draw.bind(this)),this.canvas.addEventListener("mouseup",this.drawEnd.bind(this)),this.canvas.addEventListener("mouseleave",this.drawEnd.bind(this))}drawInit(t){this.isDrawingStarted=!0;const[e,s]=this.getMouseCoordinates(t);this.context.beginPath(),this.context.moveTo(e,s)}draw(t){if(this.isDrawingStarted){const[e,n]=this.getMouseCoordinates(t);this.context.lineTo(e,n),this.context.stroke(),this.tool===s.pen&&(this.context.globalCompositeOperation="source-over"),this.tool===s.eraser&&(this.context.globalCompositeOperation="destination-out")}}drawEnd(){this.isDrawingStarted=!1}getMouseCoordinates(t){const e=canvas.getBoundingClientRect();return[t.clientX-e.left,t.clientY-e.top]}setCanvasContextLineWidth(t){this.context.lineWidth=Number(t)}setStrokeStyle(t){this.context.strokeStyle=t}setTool(t){this.tool=t}clearCanvas(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}downloadCanvas(){const t=this.canvas.toDataURL("image/png"),e=document.createElement("a");e.href=t,e.download=`Drawing_sheet ${(new Date).toLocaleString()}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}}const{cssClasses:i,uiTexts:a}=t,{toolType:o}=e;class r{constructor(t,e,s,n,i,a,o,r,d){this.canvasRef=t,this.canvasContainer=document.getElementById(e),this.penButton=document.getElementById(s),this.eraserButton=document.getElementById(n),this.eraseAllButton=document.getElementById(i),this.sizeSlider=document.getElementById(a),this.sizeSliderLabel=document.getElementById(o),this.penColorPicker=document.getElementById(r),this.downloadButton=document.getElementById(d),this.init()}init(){this.canvasRef.setTool(o.pen);const t=this.sizeSlider.value,e=this.penColorPicker.value;this.canvasRef.setCanvasContextLineWidth(t),this.canvasRef.setStrokeStyle(e),this.sizeSliderLabel.innerText=a.sliderLabel.pen,this.penButton.classList.add(i.buttonSelected),this.canvasContainer.classList.add(i.cursorPen),this.setupEventListeners()}setupEventListeners(){this.penButton.addEventListener("click",this.selectPen.bind(this)),this.eraserButton.addEventListener("click",this.selectEraser.bind(this)),this.eraseAllButton.addEventListener("click",this.clearCanvas.bind(this)),this.sizeSlider.addEventListener("input",this.updateToolSize.bind(this)),this.penColorPicker.addEventListener("change",this.updatePenColor.bind(this)),this.downloadButton.addEventListener("click",this.downloadCanvas.bind(this))}selectPen(){this.canvasRef.setTool(o.pen),this.canvasContainer.classList.add(i.cursorPen),this.canvasContainer.classList.remove(i.cursorEraser),this.penButton.classList.add(i.buttonSelected),this.eraserButton.classList.remove(i.buttonSelected),this.sizeSliderLabel.innerText=a.sliderLabel.pen}selectEraser(){this.canvasRef.setTool(o.eraser),this.canvasContainer.classList.remove(i.cursorPen),this.canvasContainer.classList.add(i.cursorEraser),this.penButton.classList.remove(i.buttonSelected),this.eraserButton.classList.add(i.buttonSelected),this.sizeSliderLabel.innerText=a.sliderLabel.eraser}updateToolSize(t){this.canvasRef.setCanvasContextLineWidth(t.target.value)}updatePenColor(t){this.canvasRef.setStrokeStyle(t.target.value)}clearCanvas(){this.canvasRef.clearCanvas()}downloadCanvas(){this.canvasRef.downloadCanvas()}}class d{constructor(t){this.canvasRef=t}setCanvasContainer(t){return this.canvasContainerId=t,this}setPenButton(t){return this.penButtonId=t,this}setEraserButton(t){return this.eraserButtonId=t,this}setEraseAllButton(t){return this.eraseAllButtonId=t,this}setSizeSlider(t){return this.sizeSliderId=t,this}setSizeSliderLabelId(t){return this.sizeSliderLabelId=t,this}setPenColorPickerId(t){return this.penColorPickerId=t,this}setDownloadButtonId(t){return this.downloadButtonId=t,this}build(){return new r(this.canvasRef,this.canvasContainerId,this.penButtonId,this.eraserButtonId,this.eraseAllButtonId,this.sizeSliderId,this.sizeSliderLabelId,this.penColorPickerId,this.downloadButtonId)}}const{penButtonId:l,eraserButtonId:c,eraseAllButtonId:h,canvasContainerId:u,sizeSliderId:v,sizeSliderLabelId:C,penColorPickerId:B,downloadButtonId:I}=t,{canvasId:p}=e;document.addEventListener("DOMContentLoaded",(()=>{const t=new n(p);new d(t).setCanvasContainer(u).setPenButton(l).setEraserButton(c).setEraseAllButton(h).setSizeSlider(v).setSizeSliderLabelId(C).setPenColorPickerId(B).setDownloadButtonId(I).build()}))})();